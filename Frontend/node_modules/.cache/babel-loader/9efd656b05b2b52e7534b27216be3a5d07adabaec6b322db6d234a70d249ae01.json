{"ast":null,"code":"import _regeneratorRuntime from\"C:/Dal_project/Advance_Cloud_5409/TA/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Dal_project/Advance_Cloud_5409/TA/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Dal_project/Advance_Cloud_5409/TA/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../Styles/userLogin.css';// Import your CSS file\nimport{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function LoginForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),usernameError=_useState6[0],setUsernameError=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),passwordError=_useState8[0],setPasswordError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loginSuccess=_useState10[0],setLoginSuccess=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),loginError=_useState12[0],setLoginError=_useState12[1];var navigate=useNavigate();useEffect(function(){setUsername('');setPassword('');},[]);// Validation function for username format\nvar validateUsername=function validateUsername(username){// Username should be at least 3 characters long\nreturn username.length>=3;};// Validation function for password format\nvar validatePassword=function validatePassword(password){// Password should be at least 8 characters long and contain at least one uppercase letter and one numeric digit\nvar passwordPattern=/^(?=.*[A-Z])(?=.*\\d).{8,}$/;return passwordPattern.test(password);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,data,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// Reset error messages and login success message\nsetUsernameError('');setPasswordError('');setLoginSuccess(false);setLoginError('');// Check username format\nif(validateUsername(username)){_context.next=8;break;}setUsernameError('Username should be at least 3 characters long');return _context.abrupt(\"return\");case 8:if(validatePassword(password)){_context.next=11;break;}setPasswordError('Password should be at least 8 characters long and contain at least one uppercase letter and one numeric digit');return _context.abrupt(\"return\");case 11:_context.prev=11;_context.next=14;return fetch('https://ing0p7y9va.execute-api.us-east-1.amazonaws.com/user-login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})});case 14:response=_context.sent;if(!response.ok){_context.next=25;break;}_context.next=18;return response.json();case 18:data=_context.sent;user=data.user;// Store the userId in local storage\nlocalStorage.setItem('userId',user.userId);setLoginSuccess(true);// Redirect to the \"todo\" page\nnavigate('/todo');_context.next=27;break;case 25:// Login failed, handle the error\n// You can display an error message to the user based on the response status or content\nsetLoginError('Invalid username or password!');console.error('Login failed');case 27:_context.next=32;break;case 29:_context.prev=29;_context.t0=_context[\"catch\"](11);console.error('Error during login:',_context.t0);case 32:case\"end\":return _context.stop();}},_callee,null,[[11,29]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleRegisterClick=function handleRegisterClick(){navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",value:username,onChange:function onChange(e){return setUsername(e.target.value);}}),usernameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:usernameError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}}),passwordError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:passwordError})]}),loginSuccess?/*#__PURE__*/_jsx(\"div\",{className:\"success\",children:\"Login success!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[loginError&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:loginError}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"})]})]})]}),/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"register-link\",onClick:handleRegisterClick,children:\"Register?\"})]});}export default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginForm","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","usernameError","setUsernameError","_useState7","_useState8","passwordError","setPasswordError","_useState9","_useState10","loginSuccess","setLoginSuccess","_useState11","_useState12","loginError","setLoginError","navigate","validateUsername","length","validatePassword","passwordPattern","test","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","response","data","user","wrap","_callee$","_context","prev","next","preventDefault","abrupt","fetch","method","headers","body","JSON","stringify","sent","ok","json","localStorage","setItem","userId","console","error","t0","stop","_x","apply","arguments","handleRegisterClick","className","children","onSubmit","htmlFor","id","type","value","onChange","target","href","onClick"],"sources":["C:/Dal_project/Advance_Cloud_5409/TA/frontend/src/Components/userLogin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../Styles/userLogin.css'; // Import your CSS file\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nfunction LoginForm() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usernameError, setUsernameError] = useState('');\r\n  const [passwordError, setPasswordError] = useState('');\r\n  const [loginSuccess, setLoginSuccess] = useState(false);\r\n  const [loginError, setLoginError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setUsername('');\r\n    setPassword('');\r\n  }, []);\r\n\r\n  // Validation function for username format\r\n  const validateUsername = (username) => {\r\n    // Username should be at least 3 characters long\r\n    return username.length >= 3;\r\n  };\r\n\r\n  // Validation function for password format\r\n  const validatePassword = (password) => {\r\n    // Password should be at least 8 characters long and contain at least one uppercase letter and one numeric digit\r\n    const passwordPattern = /^(?=.*[A-Z])(?=.*\\d).{8,}$/;\r\n    return passwordPattern.test(password);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Reset error messages and login success message\r\n    setUsernameError('');\r\n    setPasswordError('');\r\n    setLoginSuccess(false);\r\n    setLoginError('');\r\n\r\n    // Check username format\r\n    if (!validateUsername(username)) {\r\n      setUsernameError('Username should be at least 3 characters long');\r\n      return;\r\n    }\r\n\r\n    // Check password format\r\n    if (!validatePassword(password)) {\r\n      setPasswordError('Password should be at least 8 characters long and contain at least one uppercase letter and one numeric digit');\r\n      return;\r\n    }\r\n\r\n    // If all validations pass, send a login request to your backend API\r\n    try {\r\n      const response = await fetch('https://ing0p7y9va.execute-api.us-east-1.amazonaws.com/user-login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        // Login was successful\r\n        const data = await response.json();\r\n        const { user } = data;\r\n        // Store the userId in local storage\r\n        localStorage.setItem('userId', user.userId);\r\n        setLoginSuccess(true);\r\n         // Redirect to the \"todo\" page\r\n        navigate('/todo');\r\n      } else {\r\n        // Login failed, handle the error\r\n        // You can display an error message to the user based on the response status or content\r\n        setLoginError('Invalid username or password!');\r\n        console.error('Login failed');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error during login:', error);\r\n    }\r\n  };\r\n  const handleRegisterClick = () => {\r\n    navigate('/');\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"login-form\">\r\n        <h2>Login</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">Username:</label>\r\n            <input\r\n              id=\"username\"\r\n              type=\"text\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n            {usernameError && <div className=\"error\">{usernameError}</div>}\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Password:</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            {passwordError && <div className=\"error\">{passwordError}</div>}\r\n          </div>\r\n          {loginSuccess ? (\r\n            <div className=\"success\">Login success!</div>\r\n          ) : (\r\n            <>\r\n              {loginError && <div className=\"error\">{loginError}</div>}\r\n              <button type=\"submit\" className=\"login-button\">\r\n                Login\r\n              </button>\r\n            </>\r\n          )}\r\n        </form>\r\n      </div>\r\n      <a href=\"/\" className=\"register-link\" onClick={handleRegisterClick}>\r\n        Register?\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}